{% extends 'base.html' %}
{% load i18n %}

{% block title %}
    {{ client.client_object }}
{% endblock %}

{% block content %}
<a class="btn btn-link" href="{{request.META.HTTP_REFERER}}">‚Üê {% trans 'Previous page' %}</a>

<h1>{{ client.client_object }}</h1>

<a href="{% url 'edit_client' pk=client.client_object.id %}" class="btn btn-info">{% trans "Edit" %}</a>

<div class="table-responsive mt-3">
    <table class="table">
        <tbody>
            <tr>
                <th scope="row">{% trans "Last name" %}</th>
                <td>
                    {{ client.client_object.last_name }}
                </td>
            </tr>
            <tr>
                <th scope="row">{% trans "First name" %}</th>
                <td>
                    {{ client.client_object.first_name }}
                </td>
            </tr>
            <tr>
                <th scope="row">{% trans "Phone" %}</th>
                <td>{{ client.client_object.phone }}</td>
            </tr>
            {% if client.client_object.height %}
                <tr>
                    <th scope="row">{% trans "Height" %}</th>
                    <td>{{ client.client_object.height }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.chest_girth %}
                <tr>
                    <th scope="row">{% trans "Chest girth" %}</th>
                    <td>{{ client.client_object.chest_girth }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.chest_height %}
                <tr>
                    <th scope="row">{% trans "Chest height" %}</th>
                    <td>{{ client.client_object.chest_height }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.waist_girth %}
                <tr>
                    <th scope="row">{% trans "Waist girth" %}</th>
                    <td>{{ client.client_object.waist_girth }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.hip_girth %}
                <tr>
                    <th scope="row">{% trans "Hip girth" %}</th>
                    <td>{{ client.client_object.hip_girth }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.neck_girth %}
                <tr>
                    <th scope="row">{% trans "Neck girth" %}</th>
                    <td>{{ client.client_object.neck_girth }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.shoulder_girth %}
                <tr>
                    <th scope="row">{% trans "Shoulder girth" %}</th>
                    <td>{{ client.client_object.shoulder_girth }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.hand_girth %}
                <tr>
                    <th scope="row">{% trans "Hand girth" %}</th>
                    <td>{{ client.client_object.hand_girth }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.hand_length %}
                <tr>
                    <th scope="row">{% trans "Hand length" %}</th>
                    <td>{{ client.client_object.hand_length }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.back_width %}
                <tr>
                    <th scope="row">{% trans "Back width" %}</th>
                    <td>{{ client.client_object.back_width }}</td>
                </tr>
            {% endif %}
            {% if client.client_object.length_waist_floor %}
                <tr>
                    <th scope="row">{% trans "Length waist-floor" %}</th>
                    <td>{{ client.client_object.length_waist_floor }}</td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<h4>{% trans "Orders" %}</h4>
<div class="table-responsive mt-3">
    <table class="table">
        <thead class="thead-dark">
            <tr>
                <th scope="col">{% trans "#" %}</th>
                <th scope="col">{% trans "Status" %}</th>
                <th scope="col">{% trans "Service" %}</th>
                <th scope="col">{% trans "Start date" %}</th>
                <th scope="col">{% trans "Cost" %}</th>
            </tr>
        </thead>
        <tbody>
            {% if orders %}
                {% for order in orders %}
                    <tr>
                        <td>
                            <a href="{% url 'view_order' id=order.order_object.id %}">{{ order.order_object.id }}</a>
                        </td>
                        <td>{{ order.localized_status }}</td>
                        <td>
                            {% if order.order_object.id_service %}
                                <a href="{% url 'view_service' id=order.order_object.id_service.id %}">{{ order.order_object.id_service }}</a>
                            {% else %}
                                <i>{% trans "Undefinedd" %}</i>
                            {% endif %}
                        </td>
                        <td>{{ order.order_object.start_date }}</td>
                        <td>{{ order.order_object.cost }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="5" class="text-center font-italic">{% trans "The client has not made any order" %}</td>
                </tr> 
            {% endif %}
        </tbody>
    </table>
</div>

<!-- Button trigger modal -->
<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteConfirmationModal">
    {% trans "Delete client" %}
</button>
  
<!-- Modal -->
<div class="modal fade" id="deleteConfirmationModal" tabindex="-1" role="dialog" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteConfirmationModalLabel">{% trans "Confirmation required" %}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                {% trans "Are you sure that you want to delete client" %} - {{ client.client_object }}?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal">{% trans "Cancel" %}</button>
                <a href="{% url 'delete_client' id=client.client_object.id %}" class="btn btn-danger">{% trans "Delete client" %}</a>
            </div>
        </div>
    </div>
</div>

{% endblock %}